
<!doctype html>
<html >
<head>
    <meta charset="UTF-8">
    <title>签到记录</title>
    <link rel="stylesheet" type="text/css" href="css/common.css"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <style type="text/css">

        .pop-box {
            /*弹出窗口后，弹出的DIV采用此CSS，保证置于最上层
             z-index控制Z轴的坐标，数值越大，离用户越近
            */
            border-radius:10px;
            z-index: 9999999; /*这个数值要足够大，才能够显示在最上层*/
            margin-bottom: 3px;
            display: none;
            position: absolute;
            background: #fbfbfb;
            border: solid 1px #6e8bde;
        }

        #bg {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            /*弹出窗口后，添加遮罩层，采用此CSS，将该层置于弹出DIV和页面层之间
             z-index控制Z轴的坐标，数值越大，离用户越近 rgba(72, 74, 68, 0.46)
            */
            z-index: 1001;
            background-color: #000000;
            -moz-opacity: 0.7;
            opacity: .70;
            filter: alpha(opacity = 70);
        }

    </style>
    <script type="text/javascript" src="../StarIndex/js/jquery.js"></script>
    <script type="text/javascript" src="../StarIndex/js/libs/modernizr.min.js"></script>
    <script type="text/javascript">

        var pageSize = "8";//每页行数
        var currentPage = "1";//当前页
        var totalPage = "4";//总页数
        var rowCount = "4";//总条数
        var params="";//参数
        var date_="";
        var emplId_=0;
        var DATE_FORMAT = /^[0-9]{4}-[0-1]?[0-9]{1}-[0-3]?[0-9]{1}$/;
        var EMOLID_FORMAT = /^[0-9]*$/;
        function queryForPages(){
            var params={pageNum:currentPage,pageSize:pageSize,date:date_,emplId:emplId_};
            $.post("/employee/logListByPage.do",params,
                function(data){
//                    var results = JSON.parse(data);
                    var results = data;
                    var list = results.Data;
                    totalPage = results.totalPageCount;
                    rowCount = results.totalItemCount;
                    pageNo=results.pageNum;
                    var message=results.Message;
                    var s = '';
                    if (message!=null){
                        alert(message);
                    }

                    if(list.length != 0){
                        for(var i=0; i<list.length; i++){

                            s += '<tr><td>' +(i+1)
                                + '</td><td>' + list[i].EmplName
                                + '</td><td>' + list[i].EmplId
                                + '</td><td>' + list[i].EmplEmail
                                + '</td><td>' + list[i].EmplAdmin
                                + '</td><INPUT TYPE="button" VALUE="按钮" ONCLICK="" id="an"><td>'
                                + '</td></tr>';

                        }

                        $('#tb').html(s);
                        $(emplId).val(null);
                    } else{
                        $('#tb').html("");
                        $(emplId).val(null);
                    }
                })

        }
        function popupDiv(div_id) {
            // 获取传入的DIV
            var $div_obj = $("#" + div_id);
            // 计算机屏幕高度
            var windowWidth = $(document.body).width();
            // 计算机屏幕长度
            var windowHeight = $(document.body).height();
            // 取得传入DIV的高度
            var popupHeight = $div_obj.height();
            // 取得传入DIV的长度
            var popupWidth = $div_obj.width();

            // // 添加并显示遮罩层
            $("<div id='bg'></div>").width(windowWidth)
                .height(windowHeight).click(function() {
                //hideDiv(div_id);
            }).appendTo("body").fadeIn(200);

            // 显示弹出的DIV
            $div_obj.css({
                "position" : "absloute",
                "left" : windowWidth / 2 - popupWidth / 2.3,
                "top" : windowHeight / 2.3 - popupHeight /2.3,
                "opacity" : "show"
            }).animate({

                opacity : "show"
            }, "slow");

        }
        /*隐藏弹出DIV*/
        function hideDiv(div_id) {
            $("#bg").remove();
            $("#" + div_id).animate({
//                left : 0,
//                top : 0,
                opacity : "hide"
            }, "slow");
        }
        $(document).ready(

            function(){
                $('#basic-modal .basic').click(function () {
                    $('#basic-modal-content').modal();
                    return false;
                });
                //员工号查询查询
                $("#emplIdBotton").click(function() {
                    emplId_ = $(emplId).val();
                    if(EMOLID_FORMAT.test(emplId_)==false && emplId_!=null){
                        alert("(＞﹏＜)您输入的员工号格式有误,请输入数字");
                    }else {
                        queryForPages();
                    }

                });
                //首页
                $("#firstPage").click(function(){
                    currentPage="1";
                    queryForPages();
                });
                //上一页
                $("#previous").click(function(){
                    if(currentPage>1)
                    {
                        currentPage-- ;
                    }
                    queryForPages();
                });
                //下一页
                $("#next").click(function(){
                    if(currentPage<totalPage)
                    {
                        currentPage++ ;
                    }
                    queryForPages();
                });
                //尾页
                $("#last").click(function(){
                    currentPage = totalPage;
                    queryForPages();
                });
                queryForPages();
            }
        );

    </script>

</head>
<body>
<div class="topbar-wrap white">
    <div class="topbar-inner clearfix">
        <div class="topbar-logo-wrap clearfix">
            <h1 class="topbar-logo none"><a href="index.html" class="navbar-brand">后台管理</a></h1>
        </div>
    </div>
</div>
<div class="container clearfix">
    <div class="sidebar-wrap">
        <div class="sidebar-title">
            <h1>菜单</h1>
        </div>
        <div class="sidebar-content">
            <ul class="sidebar-list">
                <li>
                    <a href="#"><i class="icon-font">&#xe003;</i>常用操作</a>
                    <ul class="sub-menu">
                        <li><a href="administer.html"><i class="icon-font">&#xe008;</i>记录查看</a></li>
                        <!--<li><a href="leave.html"><i class="icon-font">&#xe005;</i>请假申请</a></li>-->
                        <li><a href="ChangeInfo.html"><i class="icon-font">&#xe006;</i>密码修改</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="icon-font">&#xe018;</i>系统管理</a>
                    <ul class="sub-menu">
                        <li><a href="emplInfo.html"><i class="icon-font">&#xe006;</i>员工信息查看</a></li>
                        <li><a href="system.html"><i class="icon-font">&#xe037;</i>清理缓存</a></li>
                        <li><a href="system.html"><i class="icon-font">&#xe046;</i>数据备份</a></li>
                        <li><a href="system.html"><i class="icon-font">&#xe045;</i>数据还原</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <!--/sidebar-->
    <div class="main-wrap">

        <div class="crumb-wrap">
            <div class="crumb-list"><i class="icon-font"></i><a href="index.html">首页</a><span class="crumb-step">&gt;</span><span class="crumb-name">记录查询</span></div>
        </div>
        <div class="search-wrap">
            <div class="search-content">
                <table class="search-tab">
                    <tr >
                        <th width="70">员工号:</th>
                        <td><input   name="emplId"   type="text"  id="emplId" ></td>
                        <td><input id="emplIdBotton"  class="btn btn-primary btn2" name="emplIdBotton" value="查询"  type="button"/></td>
                    </tr>
                </table>

            </div>
        </div>
        <div class="result-wrap">

            <div class="result-content">
                <table  class="result-tab" width="100%">
                    <tr>
                        <td class="tc" width="5%"></td>
                        <td>员工名</td>
                        <td>员工号</td>
                        <td>员工邮箱</td>
                        <td>权限</td>
                        <td>操作</td>
                    </tr>

                    <tbody class="result-tab" width="100%" id="tb" style="align-content: center"></tbody>


                </table>

                <div class="list-page">
                    <button class="btn btn-primary btn2" id="firstPage">首页</button>
                    <button class="btn btn-primary btn2" id="previous">上一页</button>
                    <button class="btn btn-primary btn2" id="next">下一页</button>
                    <button class="btn btn-primary btn2" id="last">尾页</button>
                    <input type="button" value="21" onclick="popupDiv('pop-div')" style="cursor: pointer;">
                </div>
                <div id='pop-div' style="width: 250px;height:250px;" class="pop-box">
                    <br>
                    <br>
                    <br>
                    <br>
                    <h4 style="text-align:center;border-top:1px dashed #000">22</h4>
                    <div style="text-align:center">
                        <p>33</p>
                        <div id='buttonPanel'  style="text-align:center">
                            <input type="button" value="Close" id="btn1" class="btn btn-primary btn2" onclick="hideDiv('pop-div');" />
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!--/main-->
</div>
</body>
</html>